# Журнал решений проекта Coffee Machine IoT

## 2026-02-10 — Старт проекта

### Решение: Модель кофемашины — Saeco Lirika OTC RI9851/01
**Характеристики**: Суперавтомат, 7 кнопок (механические), дисплей,
автокапучинатор One Touch, платформа Saeco Minuto.
**Кнопки**: Эспрессо, Лунго, Капучино, Латте, Крепость, Меню, Вкл/Выкл.

### Решение: Параллельное дублирование кнопок (НЕ прямое управление)
**Причина**: Saeco Lirika — суперавтомат со сложной внутренней логикой
(помол → предсмачивание → заваривание → подача). Управлять помпой и
нагревателем напрямую = переписать всю логику машины + потерять все защиты.
Дублирование кнопок: ESP32 "нажимает" те же кнопки через оптопары,
штатная электроника делает всю работу.
**Преимущества**: Безопасно, просто, не теряем гарантию (условно),
штатные кнопки продолжают работать.

### Решение: Оптопары PC817 для имитации нажатий
**Причина**: Гальваническая развязка, бесшумность, компактность,
возможность имитировать короткое/длинное нажатие.
**Альтернативы**: Реле (шумные, большие), транзисторы (нет развязки).

### Решение: Микроконтроллер — ESP32
**Причина**: Wi-Fi, достаточно GPIO для 7 кнопок, Arduino-совместимый.

### Решение: Веб-интерфейс на ESP32 (начальный этап)
**Причина**: Не нужно писать мобильное приложение, работает в любом браузере.

---
## ОТКРЫТЫЕ ВОПРОСЫ
- Как именно подключены кнопки на плате? (матрица, отдельные линии, I2C?)
- Какое напряжение на линиях кнопок? (3.3В, 5В, другое?)
- Есть ли место внутри корпуса для ESP32?
- Можно ли запитать ESP32 от блока питания Saeco?
- Можно ли считывать данные с дисплея?

## РАСПРЕДЕЛЕНИЕ ЗАДАЧ
- **Пользователь**: аппаратная часть — разбор машины, подключение ESP32 к плате кнопок,
  пайка оптопар, определение распиновки кнопок, размещение ESP32 внутри корпуса.
- **Claude**: прошивка ESP32, веб-интерфейс, API, документация.

## СЛЕДУЮЩИЙ ШАГ
Пользователь разбирает машину и подключает ESP32 к кнопкам.
После подключения — сообщить какие GPIO ESP32 к каким кнопкам подключены,
и мы начнём писать прошивку.
