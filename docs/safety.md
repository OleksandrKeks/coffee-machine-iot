# Требования безопасности — Saeco Lirika OTC + ESP32

## Подход к безопасности
Мы дублируем ТОЛЬКО кнопки — вся защитная логика Saeco остаётся нетронутой.
Это принципиально безопаснее, чем прямое управление помпой/нагревателем.

## Что защищает штатная электроника Saeco (и мы это НЕ трогаем)
- Контроль температуры бойлера
- Защита от сухого хода (нет воды = нет приготовления)
- Контроль варочного блока (не установлен = ошибка)
- Контроль контейнера жмыха (полный = ошибка)
- Таймауты приготовления
- Энергосбережение (авто-выключение через 30 мин)

## Наши меры безопасности

### Электробезопасность
- Оптопары PC817: полная гальваническая развязка ESP32 от платы Saeco
- ESP32 питается от отдельного источника 5В или от безопасной линии Saeco
- Никаких подключений к силовым цепям (220В, помпа, нагреватель)

### Программная защита ESP32
- При потере Wi-Fi: не отправлять команды, ждать восстановления
- Таймаут между командами: минимум 5 сек между нажатиями напитков
- Защита от случайных нажатий: подтверждение в интерфейсе
- Watchdog: при зависании ESP32 — все GPIO в LOW (кнопки "отпущены")

### Что НЕЛЬЗЯ делать
- Подключаться к силовым цепям (220В)
- Обходить штатные защиты Saeco
- Отключать штатные датчики
- Модифицировать прошивку главной платы Saeco
